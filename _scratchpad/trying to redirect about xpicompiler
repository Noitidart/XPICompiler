try {
      gBrowser.removeEventListener('DOMContentLoaded', listenToPageLoad_IfProblemLoadingPage, true);
} catch (ignore) {}
var listenToPageLoad_IfProblemLoadingPage = function(event) {

    gBrowser.removeEventListener('DOMContentLoaded', listenToPageLoad_IfProblemLoadingPage, true);
    
    var win = event.originalTarget.defaultView;
    cDump(event);
    cDump(event.target,'event.target');
    cDump(event.currentTarget,'event.currentTarget');
    cDump(event.originalTarget,'event.originalTarget');
    cDump(explicitOriginalTarget,'explicitOriginalTarget');
    
        
    var docuri = gBrowser.webNavigation.document.documentURI;
    var location = win.location + ''; //I add a " + ''" at the end so it makes it a string so we can use string functions like location.indexOf etc

    if (win.frameElement) {
      // Frame within a tab was loaded. win should be the top window of
      // the frameset. If you don't want do anything when frames/iframes
      // are loaded in this web page, uncomment the following line:
      // return;
      // Find the root document:
      //win = win.top;
      if (docuri.indexOf('about:neterror') == 0) {
          Components.utils.reportError('IN FRAME - PROBLEM LOADING PAGE LOADED docuri = "' + docuri + '"');
      }
    } else {
        if (docuri.indexOf('about:neterror') == 0) {
            Components.utils.reportError('IN TAB - PROBLEM LOADING PAGE LOADED docuri = "' + docuri + '"');
        }
		win.document.documentElement.innerHTML = 'hijacked';
    }
}


  gBrowser.addEventListener('DOMContentLoaded', listenToPageLoad_IfProblemLoadingPage, true);
  
function cDump(obj, title) {
    var tstr = '';
    var bstr = '';
    var fstr = '';
    for (var b in obj) {
        try{
            bstr += b+'='+obj[b]+'\n';
        } catch (e) {
                fstr = b+'='+e+'\n';
        }
    }
    tstr += '<b>BSTR::</b>\n' + bstr;
    tstr += '\n<b>FSTR::</b>\n' + fstr;
        
    var cWin = Services.wm.getMostRecentWindow('navigator:browser');
    
    var onloadFunc = function() {
        cWin.gBrowser.selectedTab = cWin.gBrowser.tabContainer.childNodes[cWin.gBrowser.tabContainer.childNodes.length-1];
        newTabBrowser.removeEventListener('load', onloadFunc, true);
        if (title) { newTabBrowser.contentDocument.title = title; }
        newTabBrowser.contentDocument.body.innerHTML = tstr.replace(/\n/g,'<br>')
    };
    
    var newTabBrowser = cWin.gBrowser.getBrowserForTab(cWin.gBrowser.addTab('about:blank'));
    newTabBrowser.addEventListener('load', onloadFunc, true);

}